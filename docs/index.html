<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANode: FastChargeSAE CANode firmware</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="FC.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CANode
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">FastChargeSAE CANode firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FastChargeSAE CANode firmware </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Il firmware per ogni nodo Ã¨ selezionabile in fase di precompilazione del codice dalle direttive presenti in <a class="el" href="d4/d2a/group__CANode__selection.html">CANode_selection</a>.</p>
<h1><a class="anchor" id="Pedaliera"></a>
Pedaliera</h1>
<p>Il firmware per il nodo PEDALIERA effettua due azioni principali:</p><ul>
<li>Acquisizione sensori</li>
<li>Trasmissione valori</li>
</ul>
<h2><a class="anchor" id="Acquisizione"></a>
Acquisizione</h2>
<p>Viene configurato l'ADC in modo continuo per acquisire i valori del tps1, tps2 e del brake. Ogni volta che l'ADC termina una conversione, il DMA viene triggerato per trasferire il dato in un buffer in memoria. Non appena il buffer viene riempito i dati memorizzati nel buffer vengono filtrati e vengono aggiornati i valori correnti di ciascuna variabile.</p>
<h2><a class="anchor" id="Trasmissione"></a>
Trasmissione</h2>
<p>La VCU spedisce periodicamente dei messaggi CAN di temporizzazione. Il canale di comunicazione viene quindi multiplato a divisione di tempo, dove ogni nodo possiede uno slot trasmissivo. Non appena il nodo PEDALIERA riceve un pacchetto dalla VCU fa partire un timer di offset. Allo scadere del timer di offset, il nodo PEDALIERA comincia a trasmettere ad intervalli di #SYSTIMER_PERIOD_PRESCALER in modo periodico. Ciascuna trasmissione prevede le seguenti fasi:</p><ul>
<li>pacchettizzazione dei valori acquisiti in un frame CAN</li>
<li>spedizione del frame </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
